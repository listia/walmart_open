require "spec_helper"
require "walmart_open/requests/search"
require "walmart_open/client"
require "walmart_open/errors"

describe WalmartOpen::Requests::Search do
  context "#submit" do
    before do
      @search_req = WalmartOpen::Requests::Search.new("ipod")
      @client = WalmartOpen::Client.new
      @response = double
      expect(HTTParty).to receive(:public_send).and_return(@response)
    end

    it "succeeds" do
      expect(@response).to receive(:success?).and_return(true)
      @attrs = {"query"=>"ipod", "sort"=>"relevance", "format"=>"json", "responseGroup"=>"base", "totalResults"=>38666, "start"=>1, "numItems"=>10, "items"=>[{"itemId"=>21967115, "parentItemId"=>21967115, "name"=>"Apple iPod Touch 5th Generation (Choose Your Color in 32GB or 64GB) with Bonus Accessory Kit", "salePrice"=>279.0, "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"With an ultrathin design, a 4-inch Retina display, a 5-megapixel iSight camera on the 32GB and 64GB models, iTunes and the App Store, Siri, iMessage, FaceTime, Game Center and more it's the most fun iPod touch ever.", "longDescription"=>"iPod touch features a 6-millimetre ultrathin design and a brilliant 4-inch Retina display. The 5-megapixel iSight camera on the 32GB and 64GB models lets you take stunning photos, even in panorama or record 1080p video. Discover music, movies and more from the iTunes Store or browse apps and games from the App Store. And with iOS 6 the world's most advanced mobile operating system you get Siri, iMessage, Facebook integration, FaceTime, Game Center and more.&lt;p&gt;Key Features&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;noindent&quot;&gt;&lt;li&gt;Ultrathin design available in five gorgeous colors&lt;/li&gt;&lt;li&gt;4-inch Retina display&lt;/li&gt;&lt;li&gt;Apple A5 chip&lt;/li&gt;&lt;li&gt;5-megapixel iSight camera with 1080p HD video recording&lt;/li&gt;&lt;li&gt;FaceTime HD camera with 1.2-megapixel photos and 720p HD video recording&lt;/li&gt;&lt;li&gt;iOS 6 with features like Siri, Passbook and Facebook integration&lt;/li&gt;&lt;li&gt;iTunes Store with millions of songs and thousands of movies and TV shows&lt;/li&gt;&lt;li&gt;App Store with more than 900,000 apps, including over 100,000 games&lt;/li&gt;&lt;li&gt;Game Center with millions of gamers&lt;/li&gt;&lt;li&gt;Free text messaging over Wi-Fi with iMessage&lt;/li&gt;&lt;li&gt;Rich HTML email and Safari web browser&lt;/li&gt;&lt;li&gt;AirPlay and AirPlay Mirroring&lt;/li&gt;&lt;li&gt;40 hours of music playback, 8 hours of video playback&lt;/li&gt;&lt;li&gt;iPod touch loop included&lt;/li&gt;&lt;/ul&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/11/13/01/55/15/1113015515798_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Touch-5th-Generation-Choose-Your-Color-in-32GB-or-64GB-with-Bonus-Accessory-Kit%252F21967115%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Touch-5th-Generation-Choose-Your-Color-in-32GB-or-64GB-with-Bonus-Accessory-Kit/21967115", "categoryNode"=>"3944_96469_1057284", "bundle"=>true, "availableOnline"=>true}, {"itemId"=>21967113, "parentItemId"=>21967113, "name"=>"Apple iPod Nano 16GB (Choose Your Color) with Bonus Accessory Kit", "salePrice"=>139.0, "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"The redesigned, ultraportable iPod nano now has a larger, 2.5&quot; Multi-Touch display. Play your favorite songs, browse music by genre, or listen to Genius playlists and FM radio. Or watch movies and widescreen videos on the bigger screen. A perfect workout partner, iPod nano tracks your steps, your runs, and burned calories and syncs to the Nike+ website to challenge friends. And with built-in Bluetooth technology, you can wirelessly connect to speakers, headphones, or car stereos.", "longDescription"=>"&lt;br&gt;&lt;b&gt;Key Features:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;2.5&quot; Multi-Touch color display with 240-by-432 pixel resolution&lt;/li&gt;&lt;li&gt;Only 5.4-mm thin &mdash; the thinnest iPod ever&lt;/li&gt;&lt;li&gt;Easy-to-use controls to quickly adjust volume, or play, pause, and change songs&lt;/li&gt;&lt;li&gt;Bluetooth 4.0&lt;/li&gt;&lt;li&gt;Widescreen video&lt;/li&gt;&lt;li&gt;FM radio with Live Pause&lt;/li&gt;&lt;li&gt;Built-in pedometer for fitness&lt;/li&gt;&lt;li&gt;Built-in Nike+ support for voice feedback and syncing to nikeplus.com&lt;/li&gt;&lt;li&gt;Anodized aluminum in seven gorgeous colors&lt;/li&gt;&lt;li&gt;16GB capacity*&lt;/li&gt;&lt;li&gt;Up to 30 hours of music playback**&lt;/li&gt;&lt;li&gt;Apple EarPods&lt;/li&gt;&lt;li&gt;Works with Mac and PC&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;br&gt;*1 GB = 1 billion bytes; actual formatted capacity less.&lt;br&gt;**Rechargeable batteries have a limited number of charge cycles and may eventually need to be replaced. Battery life and number of charge cycles vary by use and settings. See www.apple.com/batteries for more information. &lt;br&gt;&lt;br&gt;&lt;b&gt;Accessories and Related Products:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;Apple EarPods with Remote and Mic&lt;/li&gt;&lt;li&gt;Apple Lightning to USB Cable&lt;/li&gt;&lt;li&gt;Apple Lightning to 30-pin Adapter&lt;/li&gt;&lt;li&gt;Apple Lightning to 30-pin Adapter (0.2 m)&lt;/li&gt;&lt;li&gt;AppleCare Protection Plan for iPod&lt;/li&gt;&lt;/ul&gt;&lt;b&gt;Ematic Universal Accessory Kit for iPod and MP3 Players&lt;/b&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/11/13/01/55/15/1113015515796_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Nano-16GB-Choose-Your-Color-with-Bonus-Accessory-Kit%252F21967113%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Nano-16GB-Choose-Your-Color-with-Bonus-Accessory-Kit/21967113", "categoryNode"=>"3944_96469_1057284", "bundle"=>true, "availableOnline"=>true}, {"itemId"=>12510107, "parentItemId"=>12510107, "name"=>"Apple iPod Classic 7th Generation 160GB  (Black)", "msrp"=>249.0, "salePrice"=>229.0, "upc"=>"885909341320", "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"Now you can take it with you. All of it. The black Apple iPod classic 160GB, 7th generation comes with 160GB of storage in the same compact size. It holds up to 40,000 songs, 200 hours of video, 25,000 photos, or any combination. Available in quintessential silver or striking black, the iPod classic 7th generation catches your eye with its classic, all-metal enclosure composed of anodized aluminum and polished stainless steel. The Genius playlist feature creates an on-the-fly playlist of tracks in your library that go great with the song you're listening to. And Cover Flow lets you flip through your music by album artwork. Discovering new music, movies, TV shows, games, audio books, and podcasts is easy on the iTunes Store. You can even rent a movie from iTunes and watch it on the go. To get everything into your pocket, just connect iPod classic 7th generation to your Mac or PC, and iTunes transfers your music and more in one seamless sync.", "longDescription"=>"&lt;b&gt;Black Apple iPod classic 160GB, 7th generation:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;to 40,000 songs, 200 hours of video,25,000 photos, or any combination&lt;/li&gt;&lt;li&gt;Sleek, anodized aluminum andpolished stainless steel enclosure&lt;/li&gt;&lt;li&gt;Genius playlists and Cover Flow&lt;/li&gt;&lt;li&gt;Up to 36 hours of audio playback or6 hours of video playback&lt;/li&gt;&lt;li&gt;Available in silver or black&lt;/li&gt;&lt;li&gt;For Mac and Windows&lt;br&gt;&lt;br&gt;&lt;b&gt;Size and weight&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Height: 4.1 inches (103.5 mm)&lt;/li&gt;&lt;li&gt;Width: 2.4 inches (61.8 mm)&lt;/li&gt;&lt;li&gt;Depth: 0.41 inch (10.5 mm)&lt;/li&gt;&lt;li&gt;Weight: 4.9 ounces (140 grams)&lt;br&gt;&lt;br&gt;&lt;b&gt;Capacity&lt;/b&gt;&lt;/li&gt;&lt;li&gt;160GB hard drive&lt;/li&gt;&lt;li&gt;Holds up to 40,000 songs in 128Kbps AAC format&lt;/li&gt;&lt;li&gt;Holds up to 25,000 iPod-viewable photos&lt;/li&gt;&lt;li&gt;Holds up to 200 hours of video&lt;/li&gt;&lt;li&gt;Stores data via USB hard drive&lt;br&gt;&lt;br&gt;&lt;b&gt;In the box&lt;/b&gt;&lt;/li&gt;&lt;li&gt;iPod classic&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;USB 2.0 cable&lt;/li&gt;&lt;li&gt;Dock adapter&lt;/li&gt;&lt;li&gt;Quick Start guide&lt;br&gt;&lt;br&gt;&lt;b&gt;Environmental Status Report&lt;/b&gt;&lt;br&gt;It is designed with the following features to reduce environmental impact:&lt;/li&gt;&lt;li&gt;Arsenic-free display glass&lt;/li&gt;&lt;li&gt;BFR-free&lt;/li&gt;&lt;li&gt;Mercury-free LED-backlit display&lt;/li&gt;&lt;li&gt;PVC-free&lt;/li&gt;&lt;li&gt;Highly recyclable aluminum and stainless steel enclosure&lt;br&gt;&lt;br&gt;&lt;b&gt;Display&lt;/b&gt;&lt;/li&gt;&lt;li&gt;2.5&quot; (diagonal) color LCD with LED backlight&lt;/li&gt;&lt;li&gt;320-by-240-pixel resolution at 163 pixels per inch&lt;br&gt;&lt;br&gt;&lt;b&gt;Black Apple iPod classic 160GB Audio&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Audio formats supported: AAC (8 to 320 Kbps), Protected AAC (from iTunes Store), MP3 (8 to 320 Kbps), MP3 VBR, Audible (formats 2, 3, 4, Audible Enhanced Audio, AAX, and AAX+), Apple Lossless, AIFF, and WAV&lt;/li&gt;&lt;li&gt;User-configurable maximum volume limit&lt;br&gt;&lt;br&gt;&lt;b&gt;Headphones&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Impedance: 32 ohms&lt;br&gt;&lt;br&gt;&lt;b&gt;Video&lt;/b&gt;&lt;/li&gt;&lt;li&gt;H.264 video, up to 1.5 Mbps, 640 by 480 pixels, 30 frames per second, Low-Complexity version of the H.264 Baseline Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; H.264 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Baseline Profile up to Level 3.0 with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; MPEG-4 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Simple Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats&lt;br&gt;&lt;br&gt;&lt;b&gt;Black Apple iPod classic 160GBLanguages&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Czech, Danish, Dutch, English, Finnish, French, German, Greek, Hungarian, Italian, Japanese, Korean, Norwegian, Polish, Portuguese, Russian, Simplified Chinese, Spanish, Swedish, Traditional Chinese, and Turkish&lt;/li&gt;&lt;li&gt;Additional language support for display of song, album, and artist information: Bulgarian, Croatian, Romanian, Serbian, Slovak, Slovenian, Ukrainian, and Vietnamese&lt;br&gt;&lt;br&gt;&lt;b&gt;Input and output&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Dock connector&lt;/li&gt;&lt;li&gt;3.5-mm stereo headphone jack&lt;br&gt;&lt;br&gt;&lt;b&gt;External buttons and controls&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Hold switch&lt;/li&gt;&lt;li&gt;Click Wheel&lt;br&gt;&lt;br&gt;&lt;b&gt;Apple iPod classic 7th generation battery and power&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Built-in rechargeable lithium-ion battery&lt;/li&gt;&lt;li&gt;Music playback time: Up to 36 hours when fully charged&lt;/li&gt;&lt;li&gt;Video playback time: Up to 6 hours when fully charged&lt;/li&gt;&lt;li&gt;Charging via USB to computer or power adapter (sold separately)&lt;/li&gt;&lt;li&gt;Fast-charge time: about 2 hours (charges up to 80% of battery capacity)&lt;/li&gt;&lt;li&gt;Full-charge time: about 4 hours&lt;br&gt;&lt;br&gt;&lt;b&gt;Mac system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Mac computer with USB 2.0 port&lt;/li&gt;&lt;li&gt;Mac OS X v10.4.11 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or later&lt;br&gt;&lt;br&gt;&lt;b&gt;Windows system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;PC with USB 2.0 port&lt;/li&gt;&lt;li&gt;Windows Vista or Windows XP Home or Professional with Service Pack 3 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or late&lt;br&gt;&lt;br&gt;&lt;b&gt;Environmental requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Operating temperature: 32&Acirc;&deg; to 95&Acirc;&deg; F(0&Acirc;&deg; to 35&Acirc;&deg; C)&lt;/li&gt;&lt;li&gt;Nonoperating temperature: -4&Acirc;&deg; to 113&Acirc;&deg; F(-20&Acirc;&deg; to 45&Acirc;&deg; C)&lt;/li&gt;&lt;li&gt;Relative humidity: 5% to 95% non-condensing&lt;/li&gt;&lt;li&gt;Maximum operating altitude: 10,000 feet(3000 m)&lt;/li&gt;&lt;/ul&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/34/0088590934132_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Classic-7th-Generation-160GB-Black%252F12510107%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "modelNumber"=>"MC297LL/A", "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Classic-7th-Generation-160GB-Black/12510107", "customerRating"=>"4.789", "numReviews"=>375, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_8.gif", "categoryNode"=>"3944_96469_1057284", "bundle"=>false, "availableOnline"=>true}, {"itemId"=>25174174, "parentItemId"=>25174174, "name"=>"Apple iPod touch 5th Generation Space Gray and Silver", "msrp"=>239.0, "salePrice"=>214.99, "upc"=>"885909728947", "categoryPath"=>"Electronics/iPods & MP3 Players/All MP3 Players", "shortDescription"=>"With an ultrathin design, a 4&quot; Retina display, iTunes and the App Store, Siri, iMessage, FaceTime, Game Center, and more &mdash; it's the most fun iPod touch ever.iPod touch features a 6mm ultrathin design and brilliant, 4&quot; Retina display. The front-facing FaceTime HD camera lets you make video calls, record HD video, and capture self-portraits. Discover music, movies, and more from the iTunes Store, or browse apps and games from the App Store. And with iOS 6 &mdash; the world's most advanced mobile operating system &mdash; you get Siri, iMessage, Facebook integration, Game Center, and more.", "longDescription"=>"&lt;br&gt;&lt;b&gt;Key Features:&lt;/b&gt;&lt;ul&gt;&lt;li style=&quot;list-style: none&quot;&gt;&lt;/li&gt;&lt;li&gt;Ultrathin design &lt;/li&gt;&lt;li&gt;4&quot; Retina display &lt;/li&gt;&lt;li&gt;Apple A5 chip&lt;/li&gt;&lt;li&gt;FaceTime HD camera with 1.2-megapixel photos and 720p HD video recording&lt;/li&gt;&lt;li&gt;iOS 6 with features like Siri, Passbook, and Facebook integration&lt;/li&gt;&lt;li&gt;iTunes Store with millions of songs, and thousands of movies and TV shows&lt;/li&gt;&lt;li&gt;App Store with more than 850,000 apps, including over 100,000 games*&lt;/li&gt;&lt;li&gt;Game Center with millions of gamers&lt;/li&gt;&lt;li&gt;Free text messaging over Wi-Fi with iMessage&lt;/li&gt;&lt;li&gt;Rich HTML email and Safari web browser&lt;/li&gt;&lt;li&gt;AirPlay and AirPlay Mirroring&lt;/li&gt;&lt;li&gt;40 hours of music playback, 8 hours of video playback**&lt;/li&gt;&lt;li&gt;Apple EarPods &lt;/li&gt;&lt;li&gt;16GB capacity***&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;br&gt;Wi-Fi Internet access is required for some features; broadband recommended; fees may apply. Some features, applications, and services are not available in all areas. Application availability and pricing are subject to change.*App count refers to the total number of apps worldwide. Not all content is available in all countries.**Rechargeable batteries have a limited number of charge cycles and may eventually need to be replaced. Battery life and number of charge cycles vary by use and settings. See www.apple.com/batteries for more information. *** 1GB = 1 billion bytes; actual formatted capacity less.", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/72/0088590972894_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-touch-5th-Generation-Space-Gray-and-Silver%252F25174174%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "modelNumber"=>"ME643LL/A", "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-touch-5th-Generation-Space-Gray-and-Silver/25174174", "customerRating"=>"4.28", "numReviews"=>25, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_3.gif", "categoryNode"=>"3944_96469_164001", "bundle"=>false, "availableOnline"=>true}, {"itemId"=>21967114, "parentItemId"=>21967114, "name"=>"Apple iPod Shuffle 2GB 4th Generation (Choose Your Color) with Bonus Accessory Kit", "salePrice"=>44.0, "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"Take hundreds of songs everywhere you go with the small, wearable, and colorful iPod shuffle. Use the clickable control pad to easily play your music. With a simple tap of the VoiceOver button, you'll hear the song title, playlist name, or even battery status.* And because your different playlists and Genius Mixes are just a sync away, you'll always have the perfect music mix ready to complement your every mood. &lt;br&gt;&lt;br&gt;* VoiceOver is available in selected languages.", "longDescription"=>"&lt;br&gt;&lt;b&gt;Key Features:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;Small and wearable&lt;/li&gt;&lt;li&gt;Polished anodized aluminum design&lt;/li&gt;&lt;li&gt;Built-in clip&lt;/li&gt;&lt;li&gt;Easy-to-use control pad for playing your music, audiobooks, and podcasts&lt;/li&gt;&lt;li&gt;VoiceOver button to hear the song title, playlist menu, and battery status*&lt;/li&gt;&lt;li&gt;Support for multiple playlists and Genius Mixes&lt;/li&gt;&lt;li&gt;2GB of storage**&lt;/li&gt;&lt;li&gt;Available in slate, silver, purple, pink, yellow, green, blue&lt;/li&gt;&lt;li&gt;Apple iPod shuffle USB Cable&lt;/li&gt;&lt;li&gt;Apple Earphones&lt;/li&gt;&lt;li&gt;Works with Mac and PC&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;br&gt;*VoiceOver is available in selected languages.&lt;br&gt;**1GB = 1 billion bytes; actual formatted capacity less. &lt;br&gt;&lt;br&gt;&lt;b&gt;Accessories and Related Products:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;Apple iPod shuffle USB Cable (45 mm and 1000 mm)&lt;/li&gt;&lt;li&gt;Apple EarPods with Remote and Mic (mic not supported)&lt;/li&gt;&lt;li&gt;AppleCare Protection Plan for iPod&lt;/li&gt;&lt;/ul&gt;&lt;b&gt;Ematic 6-in-1 Universal Accessory Kit for iPods/MP3 Players&lt;/b&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/11/13/01/55/15/1113015515797_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Shuffle-2GB-4th-Generation-Choose-Your-Color-with-Bonus-Accessory-Kit%252F21967114%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Shuffle-2GB-4th-Generation-Choose-Your-Color-with-Bonus-Accessory-Kit/21967114", "categoryNode"=>"3944_96469_1057284", "bundle"=>true, "availableOnline"=>true}, {"itemId"=>17747019, "parentItemId"=>17747019, "name"=>"Apple iPod touch 4th Generation 32GB (White)", "msrp"=>299.0, "salePrice"=>199.99, "upc"=>"885909497249", "categoryPath"=>"Electronics/iPods & MP3 Players/All MP3 Players", "shortDescription"=>"The world's most popular portable gaming device is now even more fun. Listen to your favorite albums. Send text messages over Wi-Fi with iMessage. &nbsp;Record HD video. Make FaceTime calls. &nbsp;iPod touch even works with iCloud, which stores your content and pushes it to all your devices.", "longDescription"=>"&lt;br&gt;&lt;b&gt;iPod touch 32GB (4th Gen), White:&lt;/b&gt;&lt;ul&gt;&lt;li style=&quot;list-style: none&quot;&gt;&lt;/li&gt;&lt;li&gt;Apple iPod touch is available in 8GB, 32GB, and 64GB capacities&lt;/li&gt;&lt;li&gt;Available in both black and white&lt;/li&gt;&lt;li&gt;Free text messaging over Wi-Fi with iMessage&lt;/li&gt;&lt;li&gt;Front and back cameras for HD video recording&lt;/li&gt;&lt;li&gt;FaceTime video calling&lt;/li&gt;&lt;li&gt;iOS 5 with over 200 new features&lt;/li&gt;&lt;li&gt;Game Center with more than 60 million members&lt;/li&gt;&lt;li&gt;App Store with more than 500,000 apps, including over 100,000 games and entertainment titles for iPod touch 4th generation&lt;/li&gt;&lt;li&gt;iTunes Store with millions of songs, movies, and TV shows&lt;/li&gt;&lt;li&gt;iCloud, which wirelessly pushes your content to all your devices&lt;/li&gt;&lt;li&gt;Rich HTML email&lt;/li&gt;&lt;li&gt;Safari web browser&lt;/li&gt;&lt;li&gt;Wi-Fi and Bluetooth wireless technology&lt;/li&gt;&lt;li&gt;Activation and setup over Wi-Fi&lt;/li&gt;&lt;li&gt;Nike+ support built in&lt;/li&gt;&lt;li&gt;Apple Earphones&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;p&gt;&lt;font size=&quot;1px&quot;&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;Wi-Fi Internet access is required for some features of the Apple iPod touch; broadband recommended; fees may apply. Some features, applications, and services are not available in all areas. Application availability and pricing are subject to change.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;1GB = 1 billion bytes; actual formatted capacity less.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;Requires a FaceTime-enabled Mac with an Internet connection or a FaceTime-enabled iOS device with a Wi-Fi connection. Not available in all areas.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;App count refers to the total number of apps worldwide.&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/49/0088590949724_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Touch-4th-Generation-32GB-White%252F17747019%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "modelNumber"=>"MD058LL/A", "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Touch-4th-Generation-32GB-White/17747019", "customerRating"=>"4.714", "numReviews"=>243, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_7.gif", "categoryNode"=>"3944_96469_164001", "bundle"=>false, "availableOnline"=>false}, {"itemId"=>12527018, "parentItemId"=>12527018, "name"=>"Apple iPod classic 160GB, Black or Silver, 7th Generation Bundle w/ Accessories", "salePrice"=>199.99, "categoryPath"=>"Electronics/iPods & MP3 Players/All MP3 Players", "shortDescription"=>"&lt;b&gt;Save Even More With Value Bundles!&lt;br&gt;You get more for your money when you buy these popular products together &mdash; at one low price.&lt;/b&gt;&lt;br&gt;&lt;p&gt;Apple iPod classic 160 GB, 7th generation (Newest model) and Ematic Accessory Kit value bundle also includes other optional accessories.&lt;/p&gt;", "longDescription"=>"Now you can take it with you. The iPod classic comes with 160GB of storage in the same compact size, making it the take-everything everywhere iPod. It holds up to 40,000 songs, 200 hours of video, 25,000 photos, or any combination. Available in quintessential silver or striking black, the 7th generation iPod classic catches your eye with its classic, all-metal enclosure composed of anodized aluminum and polished stainless steel.&lt;p&gt;&lt;b&gt;Apple iPod classic 160GB:&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Up to 40,000 songs, 200 hours of video,25,000 photos, or any combination&lt;/li&gt;&lt;li&gt;Sleek, anodized aluminum andpolished stainless steel enclosure&lt;/li&gt;&lt;li&gt;Genius playlists and Cover Flow&lt;/li&gt;&lt;li&gt;Up to 36 hours of audio playback or 6 hours of video playback&lt;/li&gt;&lt;li&gt;Available in silver or black&lt;/li&gt;&lt;li&gt;For Mac and Windows&lt;br&gt;&lt;br&gt;&lt;b&gt;Size and weight&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Height: 4.1 inches (103.5 mm)&lt;/li&gt;&lt;li&gt;Width: 2.4 inches (61.8 mm)&lt;/li&gt;&lt;li&gt;Depth: 0.41 inch (10.5 mm)&lt;/li&gt;&lt;li&gt;Weight: 4.9 ounces (140 grams)&lt;br&gt;&lt;br&gt;&lt;b&gt;Capacity&lt;/b&gt;&lt;/li&gt;&lt;li&gt;160GB hard drive&lt;/li&gt;&lt;li&gt;Holds up to 40,000 songs in 128Kbps AAC format&lt;/li&gt;&lt;li&gt;Holds up to 25,000 iPod-viewable photos&lt;/li&gt;&lt;li&gt;Holds up to 200 hours of video&lt;/li&gt;&lt;li&gt;Stores data via USB hard drive&lt;br&gt;&lt;br&gt;&lt;b&gt;In the box&lt;/b&gt;&lt;/li&gt;&lt;li&gt;iPod classic&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;USB 2.0 cable&lt;/li&gt;&lt;li&gt;Dock adapter&lt;/li&gt;&lt;li&gt;Quick Start guide&lt;br&gt;&lt;br&gt;&lt;b&gt;Environmental Status Report&lt;/b&gt;&lt;br&gt;Designed with the following features to reduce environmental impact:&lt;/li&gt;&lt;li&gt;Arsenic-free display glass&lt;/li&gt;&lt;li&gt;BFR-free&lt;/li&gt;&lt;li&gt;Mercury-free LED-backlit display&lt;/li&gt;&lt;li&gt;PVC-free&lt;/li&gt;&lt;li&gt;Highly recyclable aluminum and stainless steel enclosure&lt;br&gt;&lt;br&gt;&lt;b&gt;Display&lt;/b&gt;&lt;/li&gt;&lt;li&gt;2.5&quot; (diagonal) color LCD with LED backlight&lt;/li&gt;&lt;li&gt;320-by-240-pixel resolution at 163 pixels per inch&lt;br&gt;&lt;br&gt;&lt;b&gt;Audio&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Audio formats supported: AAC (8 to 320 Kbps), Protected AAC (from iTunes Store), MP3 (8 to 320 Kbps), MP3 VBR, Audible (formats 2, 3, 4, Audible Enhanced Audio, AAX, and AAX+), Apple Lossless, AIFF, and WAV&lt;/li&gt;&lt;li&gt;User-configurable maximum volume limit&lt;br&gt;&lt;br&gt;&lt;b&gt;Headphones&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Impedance: 32 ohms&lt;br&gt;&lt;br&gt;&lt;b&gt;Video&lt;/b&gt;&lt;/li&gt;&lt;li&gt;H.264 video, up to 1.5 Mbps, 640 by 480 pixels, 30 frames per second, Low-Complexity version of the H.264 Baseline Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; H.264 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Baseline Profile up to Level 3.0 with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; MPEG-4 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Simple Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats&lt;br&gt;&lt;br&gt;&lt;b&gt;Languages&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Czech, Danish, Dutch, English, Finnish, French, German, Greek, Hungarian, Italian, Japanese, Korean, Norwegian, Polish, Portuguese, Russian, Simplified Chinese, Spanish, Swedish, Traditional Chinese, and Turkish&lt;/li&gt;&lt;li&gt;Additional language support for display of song, album, and artist information: Bulgarian, Croatian, Romanian, Serbian, Slovak, Slovenian, Ukrainian, and Vietnamese&lt;br&gt;&lt;br&gt;&lt;b&gt;Input and output&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Dock connector&lt;/li&gt;&lt;li&gt;3.5-mm stereo headphone jack&lt;br&gt;&lt;br&gt;&lt;b&gt;External buttons and controls&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Hold switch&lt;/li&gt;&lt;li&gt;Click Wheel&lt;br&gt;&lt;br&gt;&lt;b&gt;Battery and power&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Built-in rechargeable lithium-ion battery&lt;/li&gt;&lt;li&gt;Music playback time: Up to 36 hours when fully charged&lt;/li&gt;&lt;li&gt;Video playback time: Up to 6 hours when fully charged&lt;/li&gt;&lt;li&gt;Charging via USB to computer system or power adapter (sold separately)&lt;/li&gt;&lt;li&gt;Fast-charge time: about 2 hours (charges up to 80% of battery capacity)&lt;/li&gt;&lt;li&gt;Full-charge time: about 4 hours&lt;br&gt;&lt;br&gt;&lt;b&gt;Mac system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Mac computer with USB 2.0 port&lt;/li&gt;&lt;li&gt;Mac OS X v10.4.11 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or later&lt;br&gt;&lt;br&gt;&lt;b&gt;Windows system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;PC with USB 2.0 port&lt;/li&gt;&lt;li&gt;Windows Vista or Windows XP Home or Professional with Service Pack 3 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or late&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/11/13/00/02/03/1113000203415_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-classic-160GB-Black-or-Silver-7th-Generation-Newest-Model-with-Ematic-Accessories-Kit-Bundle%252F12527018%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-classic-160GB-Black-or-Silver-7th-Generation-Newest-Model-with-Ematic-Accessories-Kit-Bundle/12527018", "categoryNode"=>"3944_96469_164001", "bundle"=>true, "availableOnline"=>true}, {"itemId"=>12510108, "parentItemId"=>12510108, "name"=>"Apple iPod Classic 7th Generation 160GB (Silver)", "msrp"=>249.0, "salePrice"=>229.0, "upc"=>"885909340934", "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"Now you can take it with you. All of it. The silver Apple iPod classic 160GB comes with enough storage space to make it the take-everything everywhere iPod. It holds up to 40,000 songs, 200 hours of video, 25,000 photos, or any combination. Available in quintessential silver or striking black, the iPod classic 7th generation catches your eye with its classic, all-metal enclosure composed of anodized aluminum and polished stainless steel. The Genius playlist feature creates an on-the-fly playlist of tracks in your library that go great with the song you're listening to. And Cover Flow lets you flip through your music by album artwork. Discovering new music, movies, TV shows, games, audio books, and podcasts is easy on the iTunes Store. You can even rent a movie from iTunes. To get everything into your pocket, just connect the silver Apple iPod classic 160GB to your Mac or PC, and iTunes transfers your music and more in one seamless sync.", "longDescription"=>"&lt;b&gt;Silver Apple iPod classic 160GB:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;to 40,000 songs, 200 hours of video,25,000 photos, or any combination&lt;/li&gt;&lt;li&gt;Sleek, anodized aluminum andpolished stainless steel enclosure&lt;/li&gt;&lt;li&gt;Genius playlists and Cover Flow&lt;/li&gt;&lt;li&gt;Up to 36 hours of audio playback or6 hours of video playback&lt;/li&gt;&lt;li&gt;iPod classic 7th generation is available in silver or black&lt;/li&gt;&lt;li&gt;For Mac and Windows&lt;br&gt;&lt;br&gt;&lt;b&gt;Size and weight&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Height: 4.1 inches (103.5 mm)&lt;/li&gt;&lt;li&gt;Width: 2.4 inches (61.8 mm)&lt;/li&gt;&lt;li&gt;Depth: 0.41 inch (10.5 mm)&lt;/li&gt;&lt;li&gt;Weight: 4.9 ounces (140 grams)&lt;br&gt;&lt;br&gt;&lt;b&gt;Capacity&lt;/b&gt;&lt;/li&gt;&lt;li&gt;160GB hard drive&lt;/li&gt;&lt;li&gt;Holds up to 40,000 songs in 128Kbps AAC format&lt;/li&gt;&lt;li&gt;Holds up to 25,000 iPod-viewable photos&lt;/li&gt;&lt;li&gt;Holds up to 200 hours of video&lt;/li&gt;&lt;li&gt;Stores data via USB hard drive&lt;br&gt;&lt;br&gt;&lt;b&gt;In the box&lt;/b&gt;&lt;/li&gt;&lt;li&gt;iPod classic 7th generation&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;USB 2.0 cable&lt;/li&gt;&lt;li&gt;Dock adapter&lt;/li&gt;&lt;li&gt;Quick Start guide&lt;br&gt;&lt;br&gt;&lt;b&gt;Environmental Status Report&lt;/b&gt;&lt;br&gt;It is designed with the following features to reduce environmental impact:&lt;/li&gt;&lt;li&gt;Arsenic-free display glass&lt;/li&gt;&lt;li&gt;BFR-free&lt;/li&gt;&lt;li&gt;Mercury-free LED-backlit display&lt;/li&gt;&lt;li&gt;PVC-free&lt;/li&gt;&lt;li&gt;Highly recyclable aluminum and stainless steel enclosure&lt;br&gt;&lt;br&gt;&lt;b&gt;Display&lt;/b&gt;&lt;/li&gt;&lt;li&gt;2.5&quot; (diagonal) color LCD with LED backlight&lt;/li&gt;&lt;li&gt;320-by-240-pixel resolution at 163 pixels per inch&lt;br&gt;&lt;br&gt;&lt;b&gt;Silver Apple iPod classic 160GB Audio&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Audio formats supported: AAC (8 to 320 Kbps), Protected AAC (from iTunes Store), MP3 (8 to 320 Kbps), MP3 VBR, Audible (formats 2, 3, 4, Audible Enhanced Audio, AAX, and AAX+), Apple Lossless, AIFF, and WAV&lt;/li&gt;&lt;li&gt;User-configurable maximum volume limit&lt;br&gt;&lt;br&gt;&lt;b&gt;Headphones&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Earphones&lt;/li&gt;&lt;li&gt;Frequency response: 20Hz to 20,000Hz&lt;/li&gt;&lt;li&gt;Impedance: 32 ohms&lt;br&gt;&lt;br&gt;&lt;b&gt;Video&lt;/b&gt;&lt;/li&gt;&lt;li&gt;H.264 video, up to 1.5 Mbps, 640 by 480 pixels, 30 frames per second, Low-Complexity version of the H.264 Baseline Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; H.264 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Baseline Profile up to Level 3.0 with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats; MPEG-4 video, up to 2.5 Mbps, 640 by 480 pixels, 30 frames per second, Simple Profile with AAC-LC audio up to 160 Kbps, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats&lt;br&gt;&lt;br&gt;&lt;b&gt;Silver Apple iPod classic 160GB Languages&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Czech, Danish, Dutch, English, Finnish, French, German, Greek, Hungarian, Italian, Japanese, Korean, Norwegian, Polish, Portuguese, Russian, Simplified Chinese, Spanish, Swedish, Traditional Chinese, and Turkish&lt;/li&gt;&lt;li&gt;Additional language support for display of song, album, and artist information: Bulgarian, Croatian, Romanian, Serbian, Slovak, Slovenian, Ukrainian, and Vietnamese&lt;br&gt;&lt;br&gt;&lt;b&gt;Input and output&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Dock connector&lt;/li&gt;&lt;li&gt;3.5-mm stereo headphone jack&lt;br&gt;&lt;br&gt;&lt;b&gt;External buttons and controls&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Hold switch&lt;/li&gt;&lt;li&gt;Click Wheel&lt;br&gt;&lt;br&gt;&lt;b&gt;Battery and power&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Built-in rechargeable lithium-ion battery&lt;/li&gt;&lt;li&gt;Music playback time: Up to 36 hours when fully charged&lt;/li&gt;&lt;li&gt;Video playback time: Up to 6 hours when fully charged&lt;/li&gt;&lt;li&gt;Charging via USB to computer system or power adapter (sold separately)&lt;/li&gt;&lt;li&gt;Fast-charge time: about 2 hours (charges up to 80% of battery capacity)&lt;/li&gt;&lt;li&gt;Full-charge time: about 4 hours&lt;br&gt;&lt;br&gt;&lt;b&gt;Mac system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Mac computer with USB 2.0 port&lt;/li&gt;&lt;li&gt;Mac OS X v10.4.11 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or later&lt;br&gt;&lt;br&gt;&lt;b&gt;Windows system requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;PC with USB 2.0 port&lt;/li&gt;&lt;li&gt;Windows Vista or Windows XP Home or Professional with Service Pack 3 or later&lt;/li&gt;&lt;li&gt;iTunes 9 or late&lt;br&gt;&lt;br&gt;&lt;b&gt;Environmental requirements&lt;/b&gt;&lt;/li&gt;&lt;li&gt;Operating temperature: 32&Acirc;&deg; to 95&Acirc;&deg; F(0&Acirc;&deg; to 35&Acirc;&deg; C)&lt;/li&gt;&lt;li&gt;Nonoperating temperature: -4&Acirc;&deg; to 113&Acirc;&deg; F(-20&Acirc;&deg; to 45&Acirc;&deg; C)&lt;/li&gt;&lt;li&gt;Relative humidity: 5% to 95% non-condensing&lt;/li&gt;&lt;li&gt;Maximum operating altitude: 10,000 feet(3000 m)&lt;/li&gt;&lt;/ul&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/34/0088590934093_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-Classic-7th-Generation-160GB-Silver%252F12510108%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "modelNumber"=>"MC293LL/A", "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-Classic-7th-Generation-160GB-Silver/12510108", "customerRating"=>"4.688", "numReviews"=>154, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_7.gif", "categoryNode"=>"3944_96469_1057284", "bundle"=>false, "availableOnline"=>true}, {"itemId"=>21805465, "parentItemId"=>21805465, "name"=>"Apple iPod touch 4th Generation 16GB (Black or White)", "msrp"=>195.0, "salePrice"=>175.0, "upc"=>"885909684250", "categoryPath"=>"Electronics/iPods & MP3 Players/All MP3 Players", "shortDescription"=>"The world's most popular portable gaming device is now even more fun. Listen to your favorite albums. Send text messages over Wi-Fi with iMessage. Record HD video. Make FaceTime calls. iPod touch even works with iCloud, which stores your content and pushes it to all your devices.", "longDescription"=>"&lt;br&gt;&lt;b&gt;Apple iPod touch 16GB (4th Gen), Black:&lt;/b&gt;&lt;ul&gt;&lt;li&gt;Available in both black and white&lt;/li&gt;&lt;li&gt;Free text messaging over Wi-Fi with iMessage&lt;/li&gt;&lt;li&gt;Front and back cameras for HD video recording&lt;/li&gt;&lt;li&gt;FaceTime video calling&lt;/li&gt;&lt;li&gt;3.5'' screen&lt;/li&gt;&lt;li&gt;iOS 5 with over 200 new features&lt;/li&gt;&lt;li&gt;Game Center with more than 60 million members&lt;/li&gt;&lt;li&gt;App Store with more than 500,000 apps, including over 100,000 games and entertainment titles&lt;/li&gt;&lt;li&gt;iTunes Store with millions of songs, movies, and TV shows&lt;/li&gt;&lt;li&gt;iCloud, which wirelessly pushes your content to all your devices4&lt;/li&gt;&lt;li&gt;Rich HTML email&lt;/li&gt;&lt;li&gt;Safari web browser&lt;/li&gt;&lt;li&gt;Wi-Fi and Bluetooth wireless technology&lt;/li&gt;&lt;li&gt;Activation and setup over Wi-Fi&lt;/li&gt;&lt;li&gt;Nike+ support built in&lt;/li&gt;&lt;li&gt;Apple Earphones&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;p&gt;&lt;font size=&quot;1px&quot;&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;Wi-Fi Internet access is required for some features; broadband recommended; fees may apply. Some features, applications, and services are not available in all areas. Application availability and pricing are subject to change.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;1GB = 1 billion bytes; actual formatted capacity less.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;Requires a FaceTime-enabled Mac with an Internet connection or a FaceTime-enabled iOS device with a Wi-Fi connection. Not available in all areas.&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font size=&quot;1px&quot;&gt;App count refers to the total number of apps worldwide.&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/68/0088590968425_Color_Black_SW_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FApple-iPod-touch-4th-Generation-16GB-Black-or-White%252F21805465%253Faffilsrc%253Dapi", "standardShipRate"=>3.97, "marketplace"=>false, "modelNumber"=>"ME178LL/A", "productUrl"=>"http://www.walmart.com/ip/Apple-iPod-touch-4th-Generation-16GB-Black-or-White/21805465", "customerRating"=>"4.741", "numReviews"=>936, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_7.gif", "categoryNode"=>"3944_96469_164001", "bundle"=>false, "availableOnline"=>false}, {"itemId"=>30135922, "parentItemId"=>30135922, "name"=>"IPOD TOUCH 32GB (Assorted Color)", "msrp"=>295.0, "salePrice"=>294.98, "upc"=>"885909827367", "categoryPath"=>"Electronics/iPods & MP3 Players/Apple iPods", "shortDescription"=>"With an ultrathin design, a 4-inch Retina display, a 5-megapixel iSight camera on the 32GB and 64GB models, iTunes and the App Store, Siri, iMessage, FaceTime, Game Center and more it's the most fun iPod touch ever.", "longDescription"=>"iPod touch features a 6-millimetre ultrathin design and a brilliant 4-inch Retina display. The 5-megapixel iSight camera on the 32GB and 64GB models lets you take stunning photos, even in panorama or record 1080p video. Discover music, movies and more from the iTunes Store or browse apps and games from the App Store. And with iOS 6 the world's most advanced mobile operating system you get Siri, iMessage, Facebook integration, FaceTime, Game Center and more.&lt;p&gt;Key Features&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;noindent&quot;&gt;&lt;li&gt;Ultrathin design available in five gorgeous colors&lt;/li&gt;&lt;li&gt;4-inch Retina display&lt;/li&gt;&lt;li&gt;Apple A5 chip&lt;/li&gt;&lt;li&gt;5-megapixel iSight camera with 1080p HD video recording&lt;/li&gt;&lt;li&gt;FaceTime HD camera with 1.2-megapixel photos and 720p HD video recording&lt;/li&gt;&lt;li&gt;iOS 6 with features like Siri, Passbook and Facebook integration&lt;/li&gt;&lt;li&gt;iTunes Store with millions of songs and thousands of movies and TV shows&lt;/li&gt;&lt;li&gt;App Store with more than 900,000 apps, including over 100,000 games&lt;/li&gt;&lt;li&gt;Game Center with millions of gamers&lt;/li&gt;&lt;li&gt;Free text messaging over Wi-Fi with iMessage&lt;/li&gt;&lt;li&gt;Rich HTML email and Safari web browser&lt;/li&gt;&lt;li&gt;AirPlay and AirPlay Mirroring&lt;/li&gt;&lt;li&gt;40 hours of music playback, 8 hours of video playback&lt;/li&gt;&lt;li&gt;iPod touch loop included&lt;/li&gt;&lt;/ul&gt;", "thumbnailImage"=>"http://i.walmartimages.com/i/p/00/88/59/09/82/0088590982736_Color_Space-Gray_SW_100X100.jpg", "productTrackingUrl"=>"http://linksynergy.walmart.com/fs-bin/click?id=|LSNID|&offerid=223073.7200&type=14&catid=8&subid=0&hid=7200&tmpid=1081&RD_PARM1=http%253A%252F%252Fwww.walmart.com%252Fip%252FIPOD-TOUCH-32GB-SPACE-GRAY%252F30135922%253Faffilsrc%253Dapi", "standardShipRate"=>0.0, "marketplace"=>false, "modelNumber"=>"ME978LL/A", "productUrl"=>"http://www.walmart.com/ip/IPOD-TOUCH-32GB-SPACE-GRAY/30135922", "customerRating"=>"4.571", "numReviews"=>7, "customerRatingImage"=>"http://i2.walmartimages.com/i/CustRating/4_6.gif", "categoryNode"=>"3944_96469_1057284", "bundle"=>false, "availableOnline"=>true}]}
      expect(@response).to receive(:parsed_response).and_return(@attrs)
      search_results = @search_req.submit(@client)

      expect(search_results.query).to eq(@attrs["query"])
      expect(search_results.total).to eq(@attrs["totalResults"])
      expect(search_results.start).to eq(@attrs["start"])
      expect(search_results.items.count).to be(@attrs["items"].count)

    end

    it "fails with 403" do
      expect(@response).to receive(:success?).and_return(false)
      expect(@response).to receive(:parsed_response).and_return({"errors"=>[{"code"=>403, "message"=>"Account Inactive"}]})

      expect{@search_req.submit(@client)}.to raise_error(WalmartOpen::AuthenticationError)
    end
  end
end
